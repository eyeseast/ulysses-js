<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>2018 wildfires</title>
		<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
		<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.js"></script>
		<link
			href="https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css"
			rel="stylesheet"
		/>
		<style>
			body {
				margin: 0;
				padding: 0;
			}
			#map {
				position: absolute;
				top: 0;
				bottom: 0;
				width: 100%;
			}
		</style>
	</head>
	<body>
		<div id="map"></div>
		<script src="ulysses.umd.js"></script>
		<script>
			//var story;
			mapboxgl.accessToken =
				"pk.eyJ1IjoidXNhdG9kYXlncmFwaGljcyIsImEiOiJ0S3BGdndrIn0.5juF5LWz_GRcndian32tZA";

			var map = (window.map = new mapboxgl.Map({
				container: "map", // container id
				style: "mapbox://styles/chrisamico/cjpwpqryr121e2rkbnxyna4rq", // fires 2018
			}));

			var story = (window.story = new Ulysses({ map, steps: [] }));

			window.addEventListener("keydown", e => {
				if (e.key === "ArrowLeft") {
					story.previous();
				}

				if (e.key === "ArrowRight") {
					story.next();
				}

				if (e.key.match(/\d{1}/)) {
					story.step(+e.key);
				}
			});

			fetch("./data/fires-2018.json")
				.then(r => r.json())
				.then(fires => {
					story.steps = fires;
					//story.next();
				});
		</script>
	</body>
</html>
